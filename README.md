
The project is modified from [unet-vis](https://github.com/adrijanik/unet-vis)

# If you wanna see tiles and iou in a web page
## 1. Parameters to know
All of the visualization setting are in the [show code](./show%20code) folders.The tiles path is defined in [points.js](./data/points.js). Open it. You will see:
- `mask_path_web`: the mask tiles path
- `iou`:  intersection over union
- `pred_path`: the prediction tiles path
- `coords`: the points location in heatmap
- `patch_path`: the original image path
- `patch_path_web`: the original image path
- `mask_path`: the mask tiles path
- `id`: the name of tiles
- `pred_path_web`: the prediction tiles path
All of the parameters are generated by - [IOU.py](./show%20code/IOU.py)

## 2. Setting the tiles' path
The project need three kind of tiles:
- `X`: original image tiles
- `Y`: the ground truth
- `Y_hat`: the result from prediction model
Firstly, you should setting the parameters - `pathX`,  - `pathY` and - `pathY_hat`, represent the path of X, Y ,Y_hat respectively. 

The code would read the corresponding images. 
Then setting the image folder's location:
- `base_path`: indicates the location of unet-vis project
- `image_fold`: the folder under unet-vis to save the tiles

## 3. Setting parameters for threshold in [IOU.py](./show%20code/IOU.py)
- `image_series`: the name of image serires, such as `ST1_20200808_MMR_1C48`,`ST1_20200808_MMR_C88D`,which used to filter the images
- `predict_threshold`:  threshold for flood in prediction images
- `iou_threshold`: threshold for IOU

## 4. Save the tiles under  [unet-vs](https://github.com/adrijanik/unet-vis)
The tiles should save under - `image_fold` above, which has three subfolders:
- `X` 
- `Y`
- `Y_hat`
 
you could copy the image to the fold you set or use the following code:
```md
matplotlib.image.imsave(base_path + image_fold +"/X/" + f, f)
matplotlib.image.imsave(base_path + image_fold +"/Y_hat/" + f, pred)
matplotlib.image.imsave(base_path + image_fold + "/Y/"+f, imageY)
```


## 5. Generate points.js
In [unet-vs](https://github.com/adrijanik/unet-vis), the project show the tile by reading the  [points.js](./data/points.js). So we should use   - `IOU.py` to generate a new points.js. And then replace the [points.js](./data/points.js)

The [unet-vs](https://github.com/adrijanik/unet-vis) project will automatically read the [points.js](./data/points.js) and follow the path to find the tiles.



# If you wanna see low-iou-tiles in Python

## Setting the parameters [in WatchTill.py](./show code/WatchTill.py) 
- `image_path`: the original image path
- `low_iou_file`:  the csv file,which records the low iou tiles name
- `tiles_path`: the fold path for tiles
- `image_series_filter`: the image series name
- `mode`: the original image path
    if mode == 0, which means you could plot all of the low iou tiles location on the original image
    Otherwise, you could draw a specific tile
- `x1`: From save_name = 'ST1_20200808_MMR_1C48_i_j' this is j
- `y1`: From save_name = 'ST1_20200808_MMR_1C48_i_j' this is i
